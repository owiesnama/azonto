<%- include('./partials/header'); %>

<!-- socket.io script -->

<script src='http://localhost:3001/socket.io/socket.io.js'></script>
<script>
    const socket = io.connect('http://localhost:3001');
    try {
      socket.on('notification', function() { alert('done') });
    } catch (error) {
      alert(error)      
    }
</script>

<!-- socket.io script -->

<files-view inline-template
            :initial-files="<%= JSON.stringify(attachments) %>">
    <div class="container-fluid">
        <div class="row mt-5">
            <div class="col-xl-12 mb-5 mb-xl-0">
                <div class="card shadow">
                    <div class="card-header border-0">
                        <div class="row align-items-center">
                            <div class="col">
                                <h3 class="mb-0">الملفات الاخيره</h3>
                            </div>
                            <div class="col text-right">

                                <form action="/upload/" method="POST" ref="form" enctype="multipart/form-data">
                                    <div>
                                        <label for="files" class="btn btn-sm btn-primary">إضافة</label>
                                        <input id="files"
                                               @change="$refs.form.submit()"
                                               type="file" name="docs">
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <!-- Projects table -->
                        <table class="table align-items-center table-flush files--table">
                            <thead class="thead-light">
                            <tr>
                                <th scope="col"><%= __('File name') %></th>
                                <th scope="col"><%= __('File Type') %></th>
                                <th scope="col"><%= __('File size') %></th>
                                <th scope="col"><%= __('File upload date') %></th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody>

                            <tr v-if="files"
                                v-for="(file,index) in files"
                                :key="index"
                            >

                                <td scope="row" v-text="fileName(file.display_name)"></td>
                                <td v-text="extension(file.url)"></td>
                                <td dir="ltr">
                                    {{file.size| size}}
                                </td>
                                <td>
                                    {{file.updated_at| ago}}
                                </td>
                                <td class="text-center text-muted">
                                    <span>
                                        <a :href="'/upload/get/'+file.url">
                                            <i class="fa fa-download"></i>
                                        </a>

                                        <a :href="'/'+file.url" target="_blank">
                                            <i class="fa fa-file"></i>
                                        </a>

                                        <a href="#"
                                           role="button"
                                           data-toggle="dropdown"
                                           aria-haspopup="true"
                                           aria-expanded="false">
                                            <i class="fa fa-ellipsis-v"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right"
                                             aria-labelledby="navbar-default_dropdown_1">
                                            <a class="dropdown-item" href="#">
                                                <i class="fa fa-trash-alt mx-1 text-red"></i>
                                                <%= __('Move to trash') %>
                                            </a>
                                            <a class="dropdown-item" href="#">Send through</a>
                                        </div>
                                    </span>
                                </td>
                            </tr>

                            <tr v-else>
                                <td colspan="100%">
                                    <p><%= __('No files exists') %></p>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</files-view>

<!-- Footer -->

<%- include('./partials/footer'); %>

</div>

<%- include('./partials/pageFoot'); %>


<!-- Main content -->